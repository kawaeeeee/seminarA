通信手順の仕様書
目的
この仕様書は、分散計算プログラムのプロデューサー（サーバー）と コンシューマー（クライアント）間の通信手順を明確にすることを目的としています。

用語
プロデューサー: 計算範囲をコンシューマーに割り当て、結果を集約するサーバープログラム。
コンシューマー: プロデューサーから計算範囲を受け取り、計算結果を返すクライアントプログラム。
通信プロトコル
プロデューサーとコンシューマー間の通信はTCPプロトコルを使用します。以下に各手順の詳細を示します。

1. コンシューマーの準備
    コンシューマーはプロデューサーに対して接続を確立し、準備ができたことを通知します。

    コンシューマー → プロデューサー:
        データ: 'R' (準備完了シグナル)
        フォーマット: 1バイト

2. 計算範囲の割り当て
    プロデューサーはコンシューマーから準備完了シグナルを受信すると、次の計算範囲を割り当てます。

    プロデューサー → コンシューマー:
        データ: 計算範囲 (start,end)
        フォーマット: 4バイトのデータ長 + 計算範囲文字列 (例: 4バイト長 + '1,100')
3. 計算の完了通知
    コンシューマーは計算を完了し、結果をプロデューサーに送信します。

    コンシューマー → プロデューサー:
        データ: 'S' (完了シグナル)
        フォーマット: 1バイト

    コンシューマー → プロデューサー:
        データ: 計算結果 (start,end,sum)
        フォーマット: 4バイトのデータ長 + 結果文字列 (例: 4バイト長 + '1,100,5050')

4. 全タスクの完了通知
    プロデューサーは全ての計算範囲が処理された場合、コンシューマーに通知します。

    プロデューサー → コンシューマー:
        データ: 'F' (終了シグナル)
        フォーマット: 1バイト
5. 接続の終了
    プロデューサーが終了シグナルを送信した後、コンシューマーは接続を閉じます。

プログラムのフロー
    プロデューサープログラム
        サーバーソケットを作成し、特定のポートにバインドしてリスンします。
        接続要求を受け入れ、コンシューマーからの準備完了シグナルを待機します。
        準備完了シグナルを受信後、計算範囲を割り当て、データを送信します。
        コンシューマーからの完了シグナルと計算結果を受信します。
        全ての計算範囲が処理された場合、終了シグナルを送信し、接続を閉じます。
        結果を集約し、最終的な合計値を出力します。

    コンシューマープログラム
        プロデューサーに接続し、準備完了シグナルを送信します。
        プロデューサーから計算範囲を受信します。
        計算を実行し、完了シグナルと計算結果をプロデューサーに送信します。
        終了シグナルを受信した場合、接続を閉じます。

通信エラー処理
    プロデューサー: コンシューマーからの応答がない場合、接続をタイムアウトして次のコンシューマーに移行します。
    コンシューマー: プロデューサーからのデータが不正な場合、接続を閉じて再試行します。

データフォーマット
    計算範囲および計算結果はカンマ区切りの文字列で表現されます。
    データ送信時には、最初にデータのバイト長（4バイトのネットワークバイトオーダー）が送信されます。
    この仕様書に従って、プロデューサーとコンシューマー間の通信が確立され、分散計算が効率的に実行されることを期待します。